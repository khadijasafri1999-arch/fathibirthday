<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>Happy Birthday Fathi üíñ</title>

<style>
  :root{
    --pink:#ff5bb5; --pink2:#ff9ad6; --violet:#b28cff; --cyan:#7ef0ff;
    --text:#fff6fb; --muted:rgba(255,255,255,.82);
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    overflow:hidden;
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial;
    color: var(--text);
    text-align:center;
    background:#000;
    transition: background .6s ease;
  }

  /* Galaxy pink (dark tendency) */
  body.bg-galaxy{
    background:
      radial-gradient(1200px 700px at 10% 15%, rgba(255,91,181,.45), transparent 60%),
      radial-gradient(900px 600px at 85% 20%, rgba(178,140,255,.40), transparent 60%),
      radial-gradient(900px 600px at 50% 90%, rgba(126,240,255,.18), transparent 62%),
      radial-gradient(1000px 600px at 40% 50%, rgba(255,154,214,.25), transparent 70%),
      linear-gradient(180deg, #16012d, #070014);
  }
  body.bg-black{ background:#000; }

  /* Real fireworks canvas */
  canvas#fireworks{
    position:fixed; inset:0;
    width:100%; height:100%;
    pointer-events:none;
    z-index:1;
    display:none;
    opacity:.55;
    mix-blend-mode: screen;
  }

  .center{
    position:relative;
    z-index:2;
    height:100%;
    display:flex;
    align-items:center;
    justify-content:center;
    padding: 18px;
    text-align:center;
  }

  #screen{
    max-width: 980px;
    white-space: pre-line;
    text-shadow: 0 0 26px rgba(0,0,0,.35);
  }

  .n{ font-size: clamp(96px, 20vw, 180px); font-weight:1000; line-height:1; letter-spacing:2px; }
  .msg{ font-size: clamp(18px, 3.8vw, 30px); font-weight:850; line-height:1.55; }
  .love{ font-size: clamp(28px, 8vw, 56px); font-weight:1000; }
  .hb{ font-size: clamp(30px, 8.5vw, 62px); font-weight:1000; }

  .toTitle{
    font-size: clamp(22px, 5.5vw, 40px);
    font-weight: 1000;
    margin-bottom: 14px;
  }

  /* gifts button */
  #giftBtn{
    position:fixed;
    left:50%;
    bottom:18px;
    transform: translateX(-50%);
    display:none;
    border:none;
    cursor:pointer;
    padding:14px 16px;
    border-radius:20px;
    font-weight:1000;
    color:#180014;
    background: linear-gradient(135deg, var(--pink2), var(--violet));
    box-shadow: 0 18px 40px rgba(0,0,0,.25);
    z-index:5;
  }

  /* Panel */
  #panel{
    position:fixed;
    inset:0;
    background:rgba(0,0,0,.85);
    display:none;
    overflow:auto;
    padding:18px;
    -webkit-overflow-scrolling: touch;
    z-index:10;
  }
  .inner{
    max-width:900px;
    margin:0 auto;
    padding:16px;
    border-radius:20px;
    background: rgba(255,255,255,.08);
    border: 1px solid rgba(255,255,255,.14);
  }
  .envelope{
    background:#ffffff14;
    padding:18px;
    margin:14px 0;
    border-radius:18px;
    cursor:pointer;
    border: 1px solid rgba(255,255,255,.14);
  }
  .backBtn{
    padding:12px 18px;
    border:none;
    border-radius:14px;
    font-weight:900;
    cursor:pointer;
    background: rgba(255,255,255,.14);
    color:white;
    margin-top:10px;
  }
  video{
    width:100%;
    margin-top:16px;
    border-radius:16px;
    background: rgba(0,0,0,.35);
    border: 1px solid rgba(255,255,255,.14);
  }

  .slideshow{
    position:relative;
    width:100%;
    aspect-ratio:16/10;
    margin-top:16px;
    border-radius:16px;
    overflow:hidden;
    background: rgba(0,0,0,.25);
    border: 1px solid rgba(255,255,255,.14);
  }
  .slide{
    position:absolute; inset:0;
    width:100%; height:100%;
    object-fit:cover;
    opacity:0;
    transition:opacity .9s;
  }
  .slide.show{ opacity:1; }
</style>
</head>

<body class="bg-black">
<canvas id="fireworks"></canvas>

<div class="center">
  <div id="screen"></div>
</div>

<button id="giftBtn">üéÅ Open gifts</button>

<div id="panel">
  <div class="inner">

    <div id="choose">
      <h2>Open your gifts üéÅ</h2>
      <div class="envelope" onclick="showGift1()">üíå Gift 1 ‚Äî Une vid√©o</div>
      <div class="envelope" onclick="showGift2()">üíå Gift 2 ‚Äî Our love story</div>
      <button class="backBtn" onclick="closePanel()">Fermer</button>
    </div>

    <!-- Gift 1 -->
    <div id="gift1" style="display:none;">
      <button class="backBtn" onclick="back()">‚Üê Revenir</button>
      <h3>üé• Gift 1</h3>
      <video id="videoGift1"
             src="gift1.mp4"
             controls
             playsinline
             preload="metadata"></video>
    </div>

    <!-- Gift 2 -->
    <div id="gift2" style="display:none;">
      <button class="backBtn" onclick="back()">‚Üê Revenir</button>
      <h3>Our love story üíñ</h3>

      <div class="slideshow" id="slideshow">
        <img class="slide show" src="photos/photo1.jpg">
        <img class="slide" src="photos/photo2.jpg">
        <img class="slide" src="photos/photo3.jpg">
        <img class="slide" src="photos/photo4.jpg">
        <img class="slide" src="photos/photo5.jpg">
        <img class="slide" src="photos/photo6.jpg">
      </div>
    </div>

  </div>
</div>

<script>
  const screen = document.getElementById("screen");
  const giftBtn = document.getElementById("giftBtn");
  const panel = document.getElementById("panel");

  const fireworksCanvas = document.getElementById("fireworks");
  const fctx = fireworksCanvas.getContext("2d");

  // ‚úÖ corrected phrase + heart
  const wishLine = "I want you all to wish a happy birthday to my man ‚ù§Ô∏è";

  // ‚úÖ your message (UNCHANGED)
  const loveText =
"Je n‚Äôarrive m√™me pas √† expliquer √† quel point je suis reconnaissante de t‚Äôavoir dans ma vie. "+
"Avec toi, je me sens en s√©curit√©, aim√©e, choisie‚Ä¶ et tellement fi√®re d‚Äô√™tre ta femme.\n\n"+
"Je suis vraiment heureuse de vivre avec toi, de vivre toutes nos habitudes, nos fous rires du quotidien, "+
"et tous ces petits moments qui deviennent pr√©cieux juste parce que c‚Äôest avec toi.\n\n"+
"Tu es mon calme, ma force, mon bonheur. Je suis super chanceuse‚Ä¶ vraiment.\n\n"+
"Merci d‚Äô√™tre toi, merci d'avoir tenu √† ta promesse...";

  // --- timing (To Fathi ~ 15 sec) ---
  const TO_FATHI_MS = 15000;

  // --- Steps: only intro/message changed like you asked ---
  const steps = [
    { type:"text", cls:"n", text:"1", ms:900, bg:"black", fireworks:false },
    { type:"text", cls:"n", text:"2", ms:900, bg:"black", fireworks:false },
    { type:"text", cls:"n", text:"3", ms:900, bg:"black", fireworks:false },

    { type:"text", cls:"msg", text:wishLine, ms:2800, bg:"galaxy", fireworks:true },

    { type:"toFathi", ms:TO_FATHI_MS, bg:"galaxy", fireworks:true },

    { type:"text", cls:"love", text:"Je t‚Äôaime plus que tu l'imagines üíû", ms:2400, bg:"galaxy", fireworks:true },
    { type:"text", cls:"hb", text:"Happy birthday mon amour üéÇ‚ú®", ms:999999, bg:"galaxy", fireworks:true, showGifts:true }
  ];

  function setBg(kind){
    document.body.classList.remove("bg-black","bg-galaxy");
    if(kind === "black") document.body.classList.add("bg-black");
    if(kind === "galaxy") document.body.classList.add("bg-galaxy");
  }

  // -------- Realistic GOLD fireworks (soft) ----------
  let fw = [];
  let fwTimer = null;
  let animating = false;

  function resizeCanvas(){
    const dpr = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
    fireworksCanvas.width = Math.floor(innerWidth * dpr);
    fireworksCanvas.height = Math.floor(innerHeight * dpr);
    fctx.setTransform(dpr, 0, 0, dpr, 0, 0);
  }
  window.addEventListener("resize", resizeCanvas);

  function rand(arr){ return arr[Math.floor(Math.random()*arr.length)]; }

  function launch(){
    const x = Math.random()*innerWidth*0.8 + innerWidth*0.1;
    const y = innerHeight + 20;
    const tx = x + (Math.random()*120 - 60);
    const ty = Math.random()*innerHeight*0.35 + innerHeight*0.12;

    fw.push({
      phase:"launch",
      x,y,
      vx:(tx-x)/32,          // slower
      vy:(ty-y)/32,
      life:0,
      color: rand([
        "rgba(255, 214, 102, 1)",  // gold
        "rgba(255, 198, 64, 1)",   // deep gold
        "rgba(255, 236, 170, 1)",  // pale gold
        "rgba(255, 224, 130, 1)",  // warm gold
        "rgba(255, 255, 255, 1)"   // sparkle white
      ])
    });
  }

  function explode(p){
    // fewer particles = less disturbing
    const parts = 55 + Math.floor(Math.random()*25);

    for(let i=0;i<parts;i++){
      const ang = Math.random()*Math.PI*2;
      const sp = Math.random()*3.2 + 0.8; // softer speed

      fw.push({
        phase:"spark",
        x:p.x, y:p.y,
        vx: Math.cos(ang)*sp,
        vy: Math.sin(ang)*sp,
        g: 0.055 + Math.random()*0.02,
        a: 0.95,
        r: 0.9 + Math.random()*1.2,
        color: p.color,
        drag: 0.985 + Math.random()*0.01
      });
    }

    // light twinkles
    const twinkles = 10 + Math.floor(Math.random()*8);
    for(let i=0;i<twinkles;i++){
      const ang = Math.random()*Math.PI*2;
      const sp = Math.random()*2.2 + 0.3;
      fw.push({
        phase:"spark",
        x:p.x, y:p.y,
        vx: Math.cos(ang)*sp,
        vy: Math.sin(ang)*sp,
        g: 0.04 + Math.random()*0.015,
        a: 0.7,
        r: 0.7 + Math.random()*0.8,
        color: "rgba(255,255,255,1)",
        drag: 0.99
      });
    }
  }

  function draw(){
    if(!animating) return;

    // very soft fade (no harsh flashing)
    fctx.fillStyle = "rgba(0,0,0,.06)";
    fctx.fillRect(0,0,innerWidth,innerHeight);

    const next = [];
    for(const p of fw){
      if(p.phase === "launch"){
        p.life++;
        p.x += p.vx; p.y += p.vy;

        // small launch glow
        fctx.beginPath();
        fctx.fillStyle = p.color;
        fctx.arc(p.x, p.y, 2.0, 0, Math.PI*2);
        fctx.fill();

        if(p.life >= 32){
          explode(p);
        } else {
          next.push(p);
        }
      } else {
        // gentle drag
        const drag = p.drag || 0.99;
        p.vx *= drag;
        p.vy *= drag;

        p.vy += p.g;
        p.x += p.vx;
        p.y += p.vy;

        // slower fade
        p.a -= 0.010 + Math.random()*0.006;

        if(p.a > 0){
          fctx.beginPath();
          const c = p.color.replace(/rgba\(([^)]+),1\)/, (m, inner) => `rgba(${inner},${p.a})`);
          fctx.fillStyle = c;
          fctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
          fctx.fill();
          next.push(p);
        }
      }
    }
    fw = next;
    requestAnimationFrame(draw);
  }

  function startFireworks(){
    fireworksCanvas.style.display = "block";
    resizeCanvas();
    animating = true;
    fw = [];
    if(fwTimer) clearInterval(fwTimer);
    fwTimer = setInterval(launch, 850); // slower rhythm
    for(let i=0;i<2;i++) setTimeout(launch, i*250);
    draw();
  }

  function stopFireworks(){
    animating = false;
    fireworksCanvas.style.display = "none";
    if(fwTimer){ clearInterval(fwTimer); fwTimer=null; }
    fw = [];
    fctx.clearRect(0,0,innerWidth,innerHeight);
  }

  // -------- Sequence rendering ----------
  let stepIndex = 0;

  function renderStep(){
    const s = steps[stepIndex];

    if(s.bg) setBg(s.bg);

    if(s.fireworks){
      if(!animating) startFireworks();
    } else {
      if(animating) stopFireworks();
    }

    giftBtn.style.display = "none";

    if(s.type === "text"){
      screen.className = s.cls;
      screen.textContent = s.text;

      if(s.showGifts) giftBtn.style.display = "block";
      if(s.cls === "hb") return;

      setTimeout(()=>{ stepIndex++; renderStep(); }, s.ms);
      return;
    }

    if(s.type === "toFathi"){
      screen.className = "msg";
      screen.innerHTML =
        `<div class="toTitle">To Fathi ‚ù§Ô∏è</div>` +
        `<div>${loveText.replaceAll("\n","<br>")}</div>`;

      setTimeout(()=>{ stepIndex++; renderStep(); }, s.ms);
      return;
    }
  }

  renderStep();

  // -------- Gifts navigation (unchanged) ----------
  giftBtn.onclick = () => panel.style.display = "block";
  function closePanel(){ panel.style.display = "none"; }
  function back(){
    document.getElementById("gift1").style.display = "none";
    document.getElementById("gift2").style.display = "none";
    document.getElementById("choose").style.display = "block";
  }
  function showGift1(){
    document.getElementById("choose").style.display = "none";
    document.getElementById("gift1").style.display = "block";
  }
  function showGift2(){
    document.getElementById("choose").style.display = "none";
    document.getElementById("gift2").style.display = "block";
  }

  // Slideshow (unchanged)
  const slides = document.querySelectorAll("#slideshow .slide");
  let sidx = 0;
  setInterval(()=>{
    slides[sidx].classList.remove("show");
    sidx = (sidx + 1) % slides.length;
    slides[sidx].classList.add("show");
  }, 2500);
</script>

</body>
</html>
  function showGift2(){
    document.getElementById("choose").style.display = "none";
    document.getElementById("gift2").style.display = "block";
  }

  // Slideshow (unchanged)
  const slides = document.querySelectorAll("#slideshow .slide");
  let sidx = 0;
  setInterval(()=>{
    slides[sidx].classList.remove("show");
    sidx = (sidx + 1) % slides.length;
    slides[sidx].classList.add("show");
  }, 2500);
</script>

</body>
</html>
</script>

</body>
</html>


